---
layout: post
title: RxC++ ReactiveCommand
date: '2013-09-06T08:13:00.002-07:00'
author: Kirk
tags: 
modified_time: '2013-09-06T08:13:45.425-07:00'
blogger_id: tag:blogger.com,1999:blog-7018293688983612487.post-812414665628510427
blogger_orig_url: http://kirkshoop.blogspot.com/2013/09/rxc-reactivecommand.html
---

<span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;">I rewrote the ReactiveCommand class (from Paul Betts <a href="https://github.com/reactiveui/ReactiveUI">ReactiveUI</a> library for C#) to demonstrate how to bind async commands to Xaml&nbsp;Buttons. This is a work in progress (it does not use data binding yet, is missing some error handling and there is no reason that it should be specific to the Xaml UI framework - should work with WIN32 button etc..), but I did build it for use in this Windows 8.1&nbsp;</span><a href="https://github.com/kirkshoop/rxaccelerometer/"><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;">sample</span></a><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;">.</span><br /><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;"></span><br /><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;">ReactiveCommand models calls to the Execute function as a Sequence of the value passed to each Execute. All subscriptions to it are called on the UI thread. There can be many subscriptions directly to ReactiveCommand, there can also be many async functions registered. </span><br /><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;"></span><br /><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;">Each async function registered takes the value passed to Execute does work and returns a result. Each call to RegisterAsyncCommand returns a new Sequence of the results from each call to the registered function. All subscriptions to the Sequence of results are called on the UI thread.</span><br /><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;"></span><br /><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;">ReactiveCommand also provides Sequences of bools, that can be subscribed, that represent its state. When the CanExecute Sequence is bound to the enabled property of the button the state of the ReactiveCommand is communicated into the ui. </span><br /><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;"></span><br /><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;">By default ReactiveCommand will ignore Execute until all the subscribers (sync and async) to the previous Execute call have finished. This can be changed during construction.</span><br /><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;"></span><br /><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;">Here is some (out-of-order) usage from the sample.</span><br /><br /><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;">Subscription - async version (Scenario1.Xaml.cpp):</span><br /><script src="https://gist.github.com/kirkshoop/6464689.js"></script><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;"></span><br /><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;">Subscription - sync version (Scenario1.Xaml.cpp):</span><br /><script src="https://gist.github.com/kirkshoop/6465077.js"></script><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;"></span><br /><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;">Binding (Scenario1.Xaml.cpp):</span><br /><script src="https://gist.github.com/kirkshoop/6465122.js"></script><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;"></span><br /><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;">Creation (Scenario1.Xaml.cpp):</span><br /><script src="https://gist.github.com/kirkshoop/6465139.js"></script><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;"></span><br /><span style="font-family: &quot;Trebuchet MS&quot;, sans-serif;">Create state sequences that are used by these ReactiveCommand (Scenario1.Xaml.cpp):</span><br /><script src="https://gist.github.com/kirkshoop/6465167.js"></script><br />